<turbo-frame id="cell_<%= item["id"] %>">
  <% checked = !!item["checked"] %>
  <div class="group relative h-full rounded-2xl border px-3 py-3 text-left shadow-sm transition duration-150 ease-out <%= checked ? "border-emerald-200 bg-emerald-50 ring-1 ring-emerald-100" : "border-slate-100 bg-white hover:-translate-y-[1px] hover:border-amber-200 hover:ring-amber-100" %>">
    <div class="flex items-start justify-between gap-2">
      <div class="flex items-center gap-2">
        <div class="flex h-7 w-7 items-center justify-center rounded-full text-xs font-bold <%= checked ? "bg-emerald-500 text-white" : "bg-slate-100 text-slate-600" %>">
          <%= item["id"] %>
        </div>
        <div class="text-sm font-semibold text-slate-900 leading-tight"><%= item["title"] %></div>
      </div>
      <% if checked %>
        <span class="rounded-full bg-emerald-500 px-2.5 py-1 text-[11px] font-bold uppercase tracking-wide text-white shadow-sm">できた！</span>
      <% end %>
    </div>
    <% if item["checked_at"].present? %>
      <p class="mt-2 text-[11px] text-emerald-700">おわった <%= l(Time.zone.parse(item["checked_at"].to_s), format: :child_short) rescue item["checked_at"] %></p>
    <% end %>

    <div class="mt-3">
      <% if bingo_card.expired? %>
        <div class="rounded-full bg-slate-100 px-3 py-2 text-center text-xs font-semibold text-slate-500">期限切れ・更新できません</div>
      <% else %>
        <%= button_to(
              checked ? "とりけす" : "やった！",
              yorimichi_bingo_toggle_path(token: bingo_card.token),
              params: { id: item["id"] },
              method: :patch,
              form: { data: { turbo_stream: true } },
              class: "w-full rounded-full px-3 py-2 text-center text-sm font-semibold shadow transition " \
                     "#{checked ? "bg-white text-emerald-700 ring-1 ring-emerald-200 hover:bg-emerald-50" : "bg-gradient-to-r from-amber-400 via-rose-400 to-indigo-500 text-white hover:opacity-95"}"
            ) %>
      <% end %>
    </div>
  </div>
</turbo-frame>
