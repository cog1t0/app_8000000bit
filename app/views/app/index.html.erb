<div class="max-w-3xl mx-auto p-6 bg-white rounded-lg shadow-lg mt-10">
  <h1 class="text-3xl font-bold text-center mb-8">
    Hello from 8000000bit.app ğŸ‘‹
  </h1>
  
  <div class="mb-6 p-4 bg-gray-50 rounded-md">
    <h2 class="text-xl font-semibold mb-3">ã‚ãªãŸã®æƒ…å ±</h2>
    <div id="first-visit" class="mb-2">åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ—¥: <span class="font-medium">èª­ã¿è¾¼ã¿ä¸­...</span></div>
    <div id="location-info" class="mb-2">ä½ç½®æƒ…å ±: <span class="font-medium">èª­ã¿è¾¼ã¿ä¸­...</span></div>
  </div>
  
  <div class="text-center">
    <button id="get-location" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
      ä½ç½®æƒ…å ±ã‚’æ›´æ–°ã™ã‚‹
    </button>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ—¥ã®ç®¡ç†
    const firstVisitElement = document.getElementById('first-visit');
    const firstVisitDate = localStorage.getItem('8000000bit_first_visit');
    
    if (!firstVisitDate) {
      // åˆå›ã‚¢ã‚¯ã‚»ã‚¹ã®å ´åˆã¯ç¾åœ¨ã®æ—¥æ™‚ã‚’ä¿å­˜
      const now = new Date();
      const formattedDate = now.toLocaleString('ja-JP');
      localStorage.setItem('8000000bit_first_visit', formattedDate);
      firstVisitElement.querySelector('span').textContent = formattedDate + ' (ä»Šå›ãŒåˆã‚ã¦ã®ã‚¢ã‚¯ã‚»ã‚¹ã§ã™)';
    } else {
      // éå»ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã“ã¨ãŒã‚ã‚‹å ´åˆ
      firstVisitElement.querySelector('span').textContent = firstVisitDate;
    }
    
    // ä½ç½®æƒ…å ±ã®å–å¾—ã¨è¡¨ç¤º
    const locationElement = document.getElementById('location-info');
    const locationButton = document.getElementById('get-location');
    
    // ä¿å­˜æ¸ˆã¿ã®ä½ç½®æƒ…å ±ãŒã‚ã‚Œã°è¡¨ç¤º
    const savedLocation = localStorage.getItem('8000000bit_location');
    if (savedLocation) {
      locationElement.querySelector('span').textContent = savedLocation;
    } else {
      locationElement.querySelector('span').textContent = 'æœªå–å¾— (ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å–å¾—ã—ã¦ãã ã•ã„)';
    }
    
    // ä½ç½®æƒ…å ±å–å¾—ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    locationButton.addEventListener('click', function() {
      if (navigator.geolocation) {
        locationElement.querySelector('span').textContent = 'ä½ç½®æƒ…å ±ã‚’å–å¾—ä¸­...';
        
        navigator.geolocation.getCurrentPosition(
          // æˆåŠŸæ™‚
          function(position) {
            const latitude = position.coords.latitude.toFixed(6);
            const longitude = position.coords.longitude.toFixed(6);
            const locationText = `ç·¯åº¦: ${latitude}, çµŒåº¦: ${longitude}`;
            
            // ä½ç½®æƒ…å ±ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
            localStorage.setItem('8000000bit_location', locationText);
            locationElement.querySelector('span').textContent = locationText;
          },
          // å¤±æ•—æ™‚
          function(error) {
            let errorMessage;
            switch(error.code) {
              case error.PERMISSION_DENIED:
                errorMessage = 'ä½ç½®æƒ…å ±ã®å–å¾—ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“';
                break;
              case error.POSITION_UNAVAILABLE:
                errorMessage = 'ä½ç½®æƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ';
                break;
              case error.TIMEOUT:
                errorMessage = 'ä½ç½®æƒ…å ±ã®å–å¾—ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ';
                break;
              default:
                errorMessage = 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';
            }
            locationElement.querySelector('span').textContent = errorMessage;
          }
        );
      } else {
        locationElement.querySelector('span').textContent = 'ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ä½ç½®æƒ…å ±ã®å–å¾—ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“';
      }
    });
  });
</script>